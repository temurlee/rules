[custom]

;节点重命名规则 - 统一不同来源的节点命名
;格式: rename=原始名称正则|新名称模板
;示例: rename=^(.+)-(.+)-(.+)$|$1-$2-$3

; 通用重命名规则
rename=^(.+?)\s*-\s*(.+?)\s*-\s*(.+?)$|$1-$2-$3
rename=^(.+?)\s*\((.+?)\)\s*(.+?)$|$1-$2-$3
rename=^(.+?)\s*\|(.+?)\s*\|(.+?)$|$1-$2-$3
rename=^(.+?)\s*#(.+?)\s*#(.+?)$|$1-$2-$3

; 地区标准化 - 确保多个同地区节点有唯一标识
rename=^(.+?)\s*(美国|US|United States|美|America)\s*(.+?)$|$1-美国-$3
rename=^(.+?)\s*(日本|JP|Japan|日|Tokyo|大阪)\s*(.+?)$|$1-日本-$3
rename=^(.+?)\s*(新加坡|SG|Singapore|新|Sing)\s*(.+?)$|$1-新加坡-$3
rename=^(.+?)\s*(香港|HK|Hong Kong|港|HongKong)\s*(.+?)$|$1-香港-$3
rename=^(.+?)\s*(台湾|TW|Taiwan|台|Taipei)\s*(.+?)$|$1-台湾-$3
rename=^(.+?)\s*(韩国|KR|Korea|韩|Seoul)\s*(.+?)$|$1-韩国-$3
rename=^(.+?)\s*(英国|UK|United Kingdom|英|London)\s*(.+?)$|$1-英国-$3
rename=^(.+?)\s*(德国|DE|Germany|德|Berlin)\s*(.+?)$|$1-德国-$3
rename=^(.+?)\s*(法国|FR|France|法|Paris)\s*(.+?)$|$1-法国-$3
rename=^(.+?)\s*(加拿大|CA|Canada|加|Toronto)\s*(.+?)$|$1-加拿大-$3
rename=^(.+?)\s*(澳大利亚|AU|Australia|澳|Sydney)\s*(.+?)$|$1-澳大利亚-$3

; 处理没有编号的重复地区节点 - 自动添加编号
rename=^(.+?)-香港$|$1-香港-01
rename=^(.+?)-美国$|$1-美国-01
rename=^(.+?)-日本$|$1-日本-01
rename=^(.+?)-新加坡$|$1-新加坡-01
rename=^(.+?)-台湾$|$1-台湾-01
rename=^(.+?)-韩国$|$1-韩国-01
rename=^(.+?)-英国$|$1-英国-01
rename=^(.+?)-德国$|$1-德国-01
rename=^(.+?)-法国$|$1-法国-01
rename=^(.+?)-加拿大$|$1-加拿大-01
rename=^(.+?)-澳大利亚$|$1-澳大利亚-01

; 协议标准化
rename=^(.+?)\s*(SS|Shadowsocks|ss)\s*(.+?)$|$1-SS-$3
rename=^(.+?)\s*(SSR|ShadowsocksR|ssr)\s*(.+?)$|$1-SSR-$3
rename=^(.+?)\s*(V2Ray|VMess|v2ray|vmess)\s*(.+?)$|$1-V2Ray-$3
rename=^(.+?)\s*(Trojan|trojan|Trojan-Go)\s*(.+?)$|$1-Trojan-$3
rename=^(.+?)\s*(WireGuard|WG|wireguard)\s*(.+?)$|$1-WG-$3

; 服务商标识
rename=^(.+?)\s*(机场|Airport|机场A|机场B)\s*(.+?)$|$1-机场-$3
rename=^(.+?)\s*(VPS|vps|VPS服务商)\s*(.+?)$|$1-VPS-$3
rename=^(.+?)\s*(自建|自建节点|Self)\s*(.+?)$|$1-自建-$3

; 清理特殊字符和多余空格
rename=^(.+?)\s*[\[\](){}]\s*(.+?)$|$1-$2
rename=^(.+?)\s*[|\\/]\s*(.+?)$|$1-$2
rename=^(.+?)\s*[!@#$%^&*+=]\s*(.+?)$|$1-$2
rename=^\s*(.+?)\s*$|$1
rename=^(.+?)\s{2,}(.+?)$|$1-$2

; 数字编号标准化
rename=^(.+?)\s*(\d+)\s*$|$1-$2
rename=^(.+?)\s*#(\d+)\s*$|$1-$2
rename=^(.+?)\s*(\d+)\s*(.+?)$|$1-$2-$3

; 清理重复的连字符
rename=^(.+?)-{2,}(.+?)$|$1-$2
rename=^(.+?)\s*-\s*-\s*(.+?)$|$1-$2

; 处理重复节点名称 - 为相同名称的节点添加序号
; 注意：这个规则需要在 Subconverter 的后续版本中支持，或者通过其他方式实现

;设置规则标志位
ruleset=🎯 全球直连,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list
ruleset=🎯 全球直连,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list
ruleset=🎯 全球直连,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list
ruleset=🎯 全球直连,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/SteamCN.list
ruleset=📢 Google,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleFCM.list
ruleset=📢 Google,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.list
ruleset=📢 Google,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list
ruleset=🍎 Apple,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list
ruleset=Ⓜ️ Microsoft,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.list
ruleset=💬 AI,https://raw.githubusercontent.com/temurlee/rules/main/perplexity.list
ruleset=💬 AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.list
ruleset=💬 AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BardAI/BardAI.list
ruleset=💬 AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.list
ruleset=💬 AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Copilot/Copilot.list
ruleset=💬 AI,https://ruleset.skk.moe/List/non_ip/ai.conf
ruleset=💬 AI,https://raw.githubusercontent.com/temurlee/rules/main/Dia.list
ruleset=📏 Figma,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Figma/Figma.list
ruleset=🚀 节点选择,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list
ruleset=🎯 全球直连,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
ruleset=🎯 全球直连,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list
ruleset=🎯 全球直连,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Download.list
;ruleset=🎯 全球直连,[]GEOIP,LAN
ruleset=🎯 全球直连,[]GEOIP,CN
ruleset=🐟 漏网之鱼,[]FINAL
;设置规则标志位

;设置分组标志位
custom_proxy_group=🚀 节点选择`select`[]♻️ 自动选择`.*`[]DIRECT
custom_proxy_group=♻️ 自动选择`url-test`.*`http://www.gstatic.com/generate_204`300,,50
custom_proxy_group=📢 Google`select`[]♻️ 自动选择`.*`[]DIRECT
custom_proxy_group=🍎 Apple`select`[]DIRECT`[]♻️ 自动选择`.*
custom_proxy_group=Ⓜ️ Microsoft`select`[]DIRECT`[]♻️ 自动选择`.*
custom_proxy_group=💬 AI`select`[]♻️ 自动选择`.*`[]DIRECT
custom_proxy_group=📏 Figma`select`[]DIRECT`[]♻️ 自动选择`.*
custom_proxy_group=🎯 全球直连`select`[]DIRECT`[]♻️ 自动选择`.*
custom_proxy_group=🐟 漏网之鱼`select`[]♻️ 自动选择`.*`[]DIRECT
;设置分组标志位

enable_rule_generator=true
overwrite_original_rules=true

#过滤节点，正则匹配
exclude_remarks=(关注|频道|CMCC|CN|CFnat)
